{"ast":null,"code":"import ForumContainer from \"@/components/ForumContainer.vue\";\nexport default {\n  mounted() {\n    document.addEventListener('DOMContentLoaded', function () {\n      // 遍历所有 filter 并 绑定事件\n      const allFilters = document.querySelectorAll(\".filter\");\n      let clickedFilter = null;\n      allFilters.forEach(filter => {\n        filter.addEventListener('mouseover', function () {\n          if (filter !== clickedFilter) {\n            filter.style.backgroundColor = '#E8E8E8';\n          }\n        });\n        filter.addEventListener('mouseout', function () {\n          if (filter !== clickedFilter) {\n            filter.style.backgroundColor = '#ffffff';\n          }\n        });\n        filter.addEventListener('click', function () {\n          if (clickedFilter) {\n            // 移除上一个点击的 filter 样式\n            // clickedFilter.style.fontWeight = 'normal';\n            clickedFilter.style.color = '#31384f';\n            clickedFilter.style.backgroundColor = '#ffffff';\n          }\n          // 添加样式到点击的 filter\n          // filter.style.fontWeight = 'bold';\n          filter.style.color = '#ffffff';\n          filter.style.backgroundColor = '#4e9da9';\n\n          // 更新 clickedFilter\n          clickedFilter = filter;\n        });\n      });\n\n      // 子区1：切换按钮：显示/隐藏\n      // const commentContainer = document.querySelector(\"comment_container\");\n      // const toggle = document.querySelector(\"toggle_bar\");\n\n      // let isHidden = true; // 初始时隐藏\n\n      // toggle.addEventListener(\"click\", () => {\n      // if (isHidden) {\n      //     commentContainer.style.bottom = \"20px\"; // 点击显示\n      // } else {\n      //     commentContainer.style.bottom = \"0px\"; // 点击隐藏\n      // }\n      // isHidden = !isHidden; // 切换状态\n      // });\n\n      // 子区2：文本  \n      const text = document.getElementById('text');\n      const total = document.querySelector('.total');\n      if (text) {\n        // 文本域获得焦点时, total 显示\n        text.addEventListener('focus', function () {\n          total.style.opacity = 1;\n        });\n        // 文本域失去焦点时，total 隐藏\n        text.addEventListener('blur', function () {\n          total.style.opacity = 0;\n        });\n        // 字数统计\n        text.addEventListener('input', function () {\n          // console.log(text.value.length);\n          total.innerHTML = `${text.value.length}/400字`;\n        });\n      }\n\n      // 动态调整textarea的高度以适应内容\n      const textArea = document.getElementById(\"text\");\n      const textBar = document.querySelector(\".text_bar\");\n      const commentContainer = document.querySelector(\".comment_container\");\n      if (textArea) {\n        textArea.addEventListener(\"input\", () => {\n          textArea.style.height = \"auto\"; // 重置高度\n          textArea.style.height = textArea.scrollHeight + \"px\"; // 设置高度为内容的实际高度\n\n          // textArea达到最大高度，textBar和commentContainer高度不再随之变化\n          const maxHeight = 128;\n          if (textArea.scrollHeight <= maxHeight) {\n            textBar.style.height = textArea.scrollHeight + 18 + \"px\"; // 适当调整text_bar的高度\n            commentContainer.style.height = textArea.scrollHeight + 92 + \"px\"; // 调整comment_container的高度\n          } else {\n            textBar.style.height = maxHeight + 18 + \"px\";\n            commentContainer.style.height = maxHeight + 92 + \"px\";\n          }\n        });\n      }\n\n      // // 仅在按下 回车键时 发布评论（使用结构: list）\n      // text.addEventListener('keyup', function(e) {\n      //     if (e.key === 'Enter') {\n      //         // 若用户输入不为空，就显示和打印\n      //         if (text.value.trim() !== '') {\n      //         // if (text.value.trim()) {  //另一种写法\n      //             item.style.display = 'block';\n      //             text.innerHTML = text.value;  // 用户输入内容\n      //         }\n      //         // 按下回车键，清空文本域\n      //         text.value = ''  // Tip: trim()方法，去除字符串前后的空格\n      //         // 按下回车后，字符统计复原\n      //         total.innerHTML = '0/400字'\n      //     }\n      // })\n    });\n  }\n};","map":{"version":3,"names":["ForumContainer","mounted","document","addEventListener","allFilters","querySelectorAll","clickedFilter","forEach","filter","style","backgroundColor","color","text","getElementById","total","querySelector","opacity","innerHTML","value","length","textArea","textBar","commentContainer","height","scrollHeight","maxHeight"],"sources":["D:\\IDEAWorkSpace\\AbyBlog\\aby-blog-frontend\\src\\views\\Forum.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <!-- 大模块（一）：话题区 -->\r\n        <div class=\"container\">\r\n            <!-- （1）话题筛选条 -->\r\n            <div class=\"topic_div\">\r\n                <!-- 话题开关 -->\r\n                <div class=\"filter_div\">\r\n                    <div class=\"filter\">Serios</div>\r\n                    <div class=\"filter\">Neutral</div>\r\n                    <div class=\"filter\">Humorous</div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n        </div>\r\n\r\n        <!-- 大模块（二）：评论区 -->\r\n        <div class=\"comment_container\">\r\n            <!-- 子区1：切换按钮：显示/隐藏 -->\r\n            <div class=\"toggle_bar\"><img src=\"@/image/icon/icons8-triangle-96-up-white.png\" alt=\"\"></div>\r\n            \r\n            <!-- 子区2：文本 -->\r\n            <div class=\"text_bar\">\r\n                <!-- 文本框 -->\r\n                <div class=\"wrapper\">\r\n                    <textarea name=\"\" id=\"text\" placeholder=\"各抒己见——\" maxlength=\"400\"></textarea>\r\n                    <button>发布</button>\r\n                </div>\r\n                \r\n                <!-- 字数统计 -->\r\n                <div class=\"wrapper\">\r\n                    <span class=\"total\">0/400字</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport ForumContainer from \"@/components/ForumContainer.vue\";\r\nexport default {\r\n    \r\n    mounted() {\r\n        document.addEventListener('DOMContentLoaded', function() {\r\n            // 遍历所有 filter 并 绑定事件\r\n            const allFilters = document.querySelectorAll(\".filter\");\r\n            let clickedFilter = null;\r\n\r\n            allFilters.forEach(filter => {\r\n                filter.addEventListener('mouseover', function() {\r\n                    if (filter !== clickedFilter) {\r\n                        filter.style.backgroundColor = '#E8E8E8';\r\n                    }\r\n                });\r\n\r\n                filter.addEventListener('mouseout', function() {\r\n                    if (filter !== clickedFilter) {\r\n                        filter.style.backgroundColor = '#ffffff';\r\n                    }\r\n                });\r\n\r\n                filter.addEventListener('click', function() {\r\n                    if (clickedFilter) {\r\n                        // 移除上一个点击的 filter 样式\r\n                        // clickedFilter.style.fontWeight = 'normal';\r\n                        clickedFilter.style.color = '#31384f';\r\n                        clickedFilter.style.backgroundColor = '#ffffff';\r\n                    }\r\n                    // 添加样式到点击的 filter\r\n                    // filter.style.fontWeight = 'bold';\r\n                    filter.style.color = '#ffffff';\r\n                    filter.style.backgroundColor = '#4e9da9';\r\n\r\n                    // 更新 clickedFilter\r\n                    clickedFilter = filter;\r\n                });\r\n            });\r\n\r\n\r\n            // 子区1：切换按钮：显示/隐藏\r\n            // const commentContainer = document.querySelector(\"comment_container\");\r\n            // const toggle = document.querySelector(\"toggle_bar\");\r\n\r\n            // let isHidden = true; // 初始时隐藏\r\n\r\n            // toggle.addEventListener(\"click\", () => {\r\n            // if (isHidden) {\r\n            //     commentContainer.style.bottom = \"20px\"; // 点击显示\r\n            // } else {\r\n            //     commentContainer.style.bottom = \"0px\"; // 点击隐藏\r\n            // }\r\n            // isHidden = !isHidden; // 切换状态\r\n            // });\r\n\r\n            // 子区2：文本  \r\n            const text = document.getElementById('text');\r\n            const total = document.querySelector('.total');\r\n\r\n            if (text) {\r\n                // 文本域获得焦点时, total 显示\r\n                text.addEventListener('focus', function() {\r\n                    total.style.opacity = 1;\r\n                })\r\n                // 文本域失去焦点时，total 隐藏\r\n                text.addEventListener('blur', function() {\r\n                    total.style.opacity = 0;\r\n                })\r\n                // 字数统计\r\n                text.addEventListener('input', function() {\r\n                    // console.log(text.value.length);\r\n                    total.innerHTML = `${text.value.length}/400字`;\r\n                })\r\n            }\r\n\r\n            // 动态调整textarea的高度以适应内容\r\n            const textArea = document.getElementById(\"text\");\r\n            const textBar = document.querySelector(\".text_bar\");\r\n            const commentContainer = document.querySelector(\".comment_container\");\r\n            \r\n            if (textArea) {\r\n                textArea.addEventListener(\"input\", () => {\r\n                    textArea.style.height = \"auto\"; // 重置高度\r\n                    textArea.style.height = (textArea.scrollHeight) + \"px\"; // 设置高度为内容的实际高度\r\n                    \r\n                    // textArea达到最大高度，textBar和commentContainer高度不再随之变化\r\n                    const maxHeight = 128;\r\n                    if (textArea.scrollHeight <= maxHeight) {\r\n                        textBar.style.height = (textArea.scrollHeight + 18) + \"px\"; // 适当调整text_bar的高度\r\n                        commentContainer.style.height = (textArea.scrollHeight + 92) + \"px\"; // 调整comment_container的高度\r\n                    } else {\r\n                        textBar.style.height = (maxHeight + 18) + \"px\";\r\n                        commentContainer.style.height = (maxHeight + 92) + \"px\";\r\n                    }\r\n                });\r\n            }\r\n            \r\n\r\n            // // 仅在按下 回车键时 发布评论（使用结构: list）\r\n            // text.addEventListener('keyup', function(e) {\r\n            //     if (e.key === 'Enter') {\r\n            //         // 若用户输入不为空，就显示和打印\r\n            //         if (text.value.trim() !== '') {\r\n            //         // if (text.value.trim()) {  //另一种写法\r\n            //             item.style.display = 'block';\r\n            //             text.innerHTML = text.value;  // 用户输入内容\r\n            //         }\r\n            //         // 按下回车键，清空文本域\r\n            //         text.value = ''  // Tip: trim()方法，去除字符串前后的空格\r\n            //         // 按下回车后，字符统计复原\r\n            //         total.innerHTML = '0/400字'\r\n            //     }\r\n            // })\r\n        });\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nbody{\r\n    /*\r\n    background-size: cover;\r\n    background: url(\"../image/background/bg_black hole.jpg\") no-repeat fixed;\r\n    */\r\n    background: #dddddd;\r\n\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: Center;\r\n}\r\n\r\ntd {\r\n    font-family: frutiger sans-serif;\r\n}\r\n\r\n/* 大模块（一）：话题区 */\r\n.container{\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: Center;\r\n\r\n    margin-top: 148px;\r\n\r\n    background-color: #eeeeee;\r\n    box-shadow: 2px 2px 2px #bdbdbd;\r\n}\r\n\r\n\r\n/* （1）话题筛选条 ------------------------------------------------------------------------- */\r\n.topic_div{\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n    width: 1600px;\r\n    height: 60px;\r\n\r\n    background-color: #31384f;\r\n}\r\n\r\n/* 话题筛选分支 */\r\n.filter_div {\r\n    display: flex;\r\n\r\n    width: auto;\r\n    height: 40px;\r\n\r\n    background-color: #ffffff;\r\n    border-radius: 20px;\r\n}\r\n.filter_div .filter {\r\n    width: auto;\r\n    height: 40px;\r\n\r\n    padding: 0 20px;\r\n    border-radius: 20px;\r\n\r\n    line-height: 40px;\r\n    transition: all 0.3s;\r\n    cursor: pointer;\r\n\r\n    font-weight: bold;\r\n    color: #31384f;\r\n}\r\n\r\n/* 大模块（二）： 评论功能 */\r\n.comment_container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n\r\n    width: 1200px;\r\n    height: auto;\r\n\r\n    transition: bottom 0.3s;\r\n\r\n    /* 初始状态：隐藏于视口底部 */\r\n    position: fixed;\r\n    bottom: 0;\r\n    /* bottom: -300px; */\r\n}\r\n/* 子区1：切换按钮：显示/隐藏 */\r\n.toggle_bar {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n    width: 140px;\r\n    height: 36px;\r\n    border: none;\r\n    border-radius: 10px 10px 0 0;\r\n\r\n    background-color: #2c9c92;\r\n    cursor: pointer;\r\n    \r\n    color: #ffffff;\r\n    font-size: 18px;\r\n}\r\n.toggle_bar img {\r\n    height: 22px;\r\n}\r\n/* 子区2：文本 */\r\n.text_bar {\r\n    width: 1200px;\r\n    padding: 20px 0;\r\n    border: none;\r\n    border-radius: 10px 10px 0 0;\r\n    \r\n    background-color: #2c9c92;\r\n    /* 注意：transition 导致闪光，效果不好 */\r\n    /* transition: all 0.3s; */\r\n    overflow: hidden;\r\n}\r\n/* 文本框 */\r\n.wrapper {\r\n    display: flex;\r\n    justify-content: center;\r\n    width: 1200px;\r\n\r\n    transition: all 0.5s;\r\n}\r\n.wrapper textarea {\r\n    width: 1000px;\r\n    height: auto;\r\n    max-height: 110px; /* 最大高度 */\r\n    padding: 10px;\r\n\r\n    border: none;\r\n    border-radius: 4px;\r\n\r\n    font-size: 16px;\r\n    \r\n    background: #f5f5f5;\r\n    transition: all 0.5s;\r\n    outline: none;\r\n    resize: none;\r\n    overflow-y: auto;\r\n\r\n    /* 添加以下两行 */\r\n    transition-property: height, max-height;\r\n    transition-timing-function: ease;\r\n    \r\n}\r\n/* 发布按钮 */\r\n.wrapper button {\r\n    width: 70px;\r\n    height: 50px;\r\n    margin-left: 10px;\r\n\r\n    border: none;\r\n    border-radius: 4px;\r\n\r\n    background-color: #31384f;\r\n    cursor: pointer;\r\n    transition: all 0.3s;\r\n\r\n    color: #fff;\r\n    font-size: 16px;\r\n}\r\n.wrapper button:hover {\r\n    font-weight: bold;\r\n    background-color: #f84f52;\r\n}\r\n/* 字数统计 */\r\n.wrapper .total {\r\n    margin-left: 880px;\r\n    color: #ffffff;\r\n\r\n    margin-top: 4px;\r\n    opacity: 0;\r\n    transition: all 0.5s;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}